(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{2144:function(e,a,t){"use strict";t.r(a);var l=t(147),i=t.n(l),n=t(196),o=t(0),s=t.n(o),r=t(32),c=t(37),m=t(1263),d=t(338),u=t(54),p=t(1316),g=t(538),h=t(1355),b=t(1356),v=t(1357),E=t(1358),C=t(1359),f=t(1319),D=t(1323),x=t(1318),y=t(1329),N=t(1402),S=t(2156),w=t(2074),q=t(2122),j=t.n(q),_=t(1327),I=t(148);const O={},F={fontSize:"13px",color:"#333"},k={display:"flex",flexDirection:"column"},M={border:"1px solid #cecece",borderRadius:3,padding:5,width:"80%"};a.default=Object(m.a)({},{withTheme:!0})(Object(r.g)(Object(c.b)(e=>({user:e.user}),{})(class extends o.Component{constructor(...e){var a;super(...e),a=this,this.state={nome:"",descricao:"",tipo:"",id_course:this.props.match.params.id_course,contasDebito:[],contasCredito:[],movimentacaoDebito:[],movimentacaoCredito:[],totalDebito:0,totalCredito:0,historico:"",data_inicio:new Date,data_fim:new Date,curso:{},showCategories:!1},this.handleSubmit=function(){var e=Object(n.a)(i.a.mark(function e(t){var l,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(e){var a,t,l,i,n,o;return a=("0"+((o=new Date(e)).getMonth()+1)).slice(-2),t=("0"+o.getDate()).slice(-2),l=("0"+o.getHours()).slice(-2),i=("0"+o.getMinutes()).slice(-2),n=("0"+o.getSeconds()).slice(-2),[[o.getFullYear(),a,t].join("-"),[l,i,n].join(":")].join(" ")},t.preventDefault(),(n=a.state).data_inicio=l(n.data_inicio),n.data_fim=l(n.data_fim),n.usuario_inclusao=a.props.user.idusuario,n.data_inclusao=l(new Date),n.usuario_inclusao=a.props.user.idusuario,n.idprofessor_responsavel=a.props.user.idusuario,delete n.contasCredito,delete n.contasDebito,console.log(n),e.next=14,I.a.post("storeAula",n);case 14:e.sent,a.props.history.push("/curso/".concat(a.props.match.params.id_course));case 16:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),this.handleDateChangeInicio=(e=>{let a=function(e){var a,t,l,i,n,o;return a=("0"+((o=new Date(e)).getMonth()+1)).slice(-2),t=("0"+o.getDate()).slice(-2),l=("0"+o.getHours()).slice(-2),i=("0"+o.getMinutes()).slice(-2),n=("0"+o.getSeconds()).slice(-2),[[o.getFullYear(),a,t].join("-"),[l,i,n].join(":")].join(" ")}(e);this.setState({data_inicio:a})}),this.handleDateChangeFim=(e=>{let a=function(e){var a,t,l,i,n,o;return a=("0"+((o=new Date(e)).getMonth()+1)).slice(-2),t=("0"+o.getDate()).slice(-2),l=("0"+o.getHours()).slice(-2),i=("0"+o.getMinutes()).slice(-2),n=("0"+o.getSeconds()).slice(-2),[[o.getFullYear(),a,t].join("-"),[l,i,n].join(":")].join(" ")}(e);this.setState({data_fim:a})}),this.handleChange=(e=>{if(console.log(e.target.className,e.target.value),["nomeContaDebito","valorDebito","quantidadeDebito","valorInicialDebito"].includes(e.target.className)){let l=[...this.state.movimentacaoDebito];l[e.target.dataset.id][e.target.className]=e.target.value,this.setState({movimentacaoDebito:l},()=>console.log("Debito",this.state.movimentacaoDebito));var a=0,t=[];this.state.movimentacaoDebito.forEach(e=>{e.quantidadeDebito||(e.quantidadeDebito=1),e.valorInicialDebito||(e.valorInicialDebito=0),e.valorDebito&&e.quantidadeDebito&&(t=[...t,e.valorDebito*e.quantidadeDebito]),e.isDebito=!0}),0!=(a=t.reduce((e,a)=>e+a,0))&&this.setState({totalDebito:a})}else if(["nomeContaCredito","valorCredito","quantidadeCredito","valorInicialCredito"].includes(e.target.className)){let l=[...this.state.movimentacaoCredito];l[e.target.dataset.id][e.target.className]=e.target.value,this.setState({movimentacaoCredito:l},()=>console.log("Credito",this.state.movimentacaoCredito)),a=0,t=[],this.state.movimentacaoCredito.forEach(e=>{e.quantidadeCredito||(e.quantidadeCredito=1),e.valorInicialCredito||(e.valorInicialCredito=0),e.valorCredito&&e.quantidadeCredito&&(t=[...t,e.valorCredito*e.quantidadeCredito]),e.isDebito=!1}),0!=(a=t.reduce((e,a)=>e+a,0))&&this.setState({totalCredito:a})}else this.setState({[e.target.name]:e.target.value})}),this.onTagsChange=((e,a)=>{this.setState({tipo:a.label})}),this.onDebitoChange=((e,a)=>{this.setState({movimentacaoDebito:[...this.state.movimentacaoDebito,a]})}),this.onCreditoChange=((e,a)=>{this.setState({movimentacaoCredito:[...this.state.movimentacaoCredito,a]})}),this.handleShowCategories=(()=>{this.setState({showCategories:!this.state.showCategories,movimentacaoCredito:[],movimentacaoDebito:[],totalDebito:0,totalCredito:0})})}componentDidMount(){var e=this;return Object(n.a)(i.a.mark(function a(){var t,l,n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,I.a.get("getCategoriesFathers");case 2:t=a.sent,l=[...t.data],n=[...t.data],e.setState({contasDebito:l}),e.setState({contasCredito:n});case 7:case"end":return a.stop()}},a)}))()}render(){let e=this.state,a=e.nome,t=e.descricao,l=e.contasDebito,i=e.contasCredito,n=e.movimentacaoCredito,r=e.movimentacaoDebito,c=e.totalDebito,m=e.totalCredito,q=e.data_fim,I=e.data_inicio,V=e.showCategories;return s.a.createElement("div",{className:"m-sm-30"},s.a.createElement("div",{className:"mb-sm-30"},s.a.createElement(d.a,{routeSegments:[{name:"Cursos",path:"/cursos/detalhesCurso"},{name:"Cria\xe7\xe3o de aula"}]})),s.a.createElement(d.h,{title:"Cria\xe7\xe3o de aula"},s.a.createElement("div",null,s.a.createElement(u.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit,onChange:this.handleChange},s.a.createElement(p.a,{container:!0,spacing:6},s.a.createElement(p.a,{item:!0,lg:6,md:6,sm:12,xs:12},s.a.createElement(u.TextValidator,{className:"mb-4 w-full",label:"Nome",type:"text",name:"nome",value:a,validators:["required"],errorMessages:["Obrigat\xf3rio"]})),s.a.createElement(p.a,{item:!0,lg:6,md:6,sm:12,xs:12},s.a.createElement(_.a,{className:"mb-6 w-full",options:[{label:"Prova"},{label:"Aula te\xf3rica"},{label:"Aulas de exercicios"}],onChange:this.onTagsChange,name:"tipo",getOptionLabel:e=>e.label,renderInput:e=>s.a.createElement(g.a,Object.assign({},e,{label:"Tipo",variant:"outlined",fullWidth:!0}))}))),s.a.createElement(p.a,{container:!0,spacing:6},s.a.createElement(p.a,{item:!0,lg:6,md:6,sm:12,xs:12},s.a.createElement(N.a,{utils:w.a,locale:j.a},s.a.createElement(S.a,{className:"mb-4 w-full",margin:"none",label:"In\xedcio",inputVariant:"standard",type:"text",autoOk:!0,value:I,onChange:this.handleDateChangeInicio,KeyboardButtonProps:{"aria-label":"change date"}}))),s.a.createElement(p.a,{item:!0,lg:6,md:6,sm:12,xs:12},s.a.createElement(N.a,{utils:w.a,locale:j.a},s.a.createElement(S.a,{className:"mb-4 w-full",margin:"none",label:"Fim",inputVariant:"standard",type:"text",autoOk:!0,value:q,onChange:this.handleDateChangeFim,KeyboardButtonProps:{"aria-label":"change date"}})))),s.a.createElement(p.a,{item:!0,lg:12,md:12,sm:12,xs:12,style:{marginBottom:"20px"}},s.a.createElement(u.TextValidator,{className:"mb-4 w-full",label:"Descri\xe7\xe3o",type:"text",name:"descricao",value:t,validators:["required"],errorMessages:["Obrigat\xf3rio"]})),s.a.createElement(p.a,{container:!0,style:{flexDirection:"row",justifyContent:"space-between"},style:V?{}:{display:"none"},item:!0,lg:12,md:12,sm:12,xs:12,spacing:6},s.a.createElement(p.a,{item:!0,lg:6,md:6,sm:12,xs:12},s.a.createElement(p.a,{container:!0,style:{flexDirection:"row",justifyContent:"space-between"},spacing:1,item:!0},s.a.createElement(p.a,{item:!0,lg:8,md:8,sm:8,xs:8},s.a.createElement(_.a,{className:"mb-6 w-full",options:l,onChange:this.onDebitoChange,name:"tipo",getOptionLabel:e=>e.category,renderInput:e=>s.a.createElement(g.a,Object.assign({},e,{label:"Conta(s) D\xe9bito",variant:"outlined",placeholder:"Adicione uma conta d\xe9bito.",fullWidth:!0}))})),s.a.createElement(p.a,{item:!0,lg:4,md:4,sm:4,xs:4},s.a.createElement(g.a,{value:c,label:"Total D\xe9bito",variant:"outlined",fullWidth:!0}))),r.length>0?s.a.createElement("div",{style:{border:"1px solid #cecece",marginBottom:20,borderRadius:3},className:"overflow-auto"},s.a.createElement(h.a,{className:"product-table"},s.a.createElement(b.a,null,s.a.createElement(v.a,null,s.a.createElement(E.a,{className:"px-6",colSpan:4},"Conta"),s.a.createElement(E.a,{className:"px-0",colSpan:2},"Valor Unit\xe1rio $"),s.a.createElement(E.a,{className:"px-0",colSpan:2},"Quantidade"),s.a.createElement(E.a,{className:"px-0",colSpan:1},"Valor Inicial"))),s.a.createElement(C.a,null,r.map((e,a)=>{let t="valorDebito-".concat(a),l="quantidadeDebito-".concat(a),i="nomeContaDebito-".concat(a),n="valorInicial-".concat(a);return s.a.createElement(v.a,{key:a},null==e.is_father?s.a.createElement(E.a,{className:"px-0 capitalize",colSpan:4,align:"left"},e.category):s.a.createElement(E.a,{style:O,className:"px-0 capitalize",colSpan:4,align:"left"},s.a.createElement("div",{style:k},s.a.createElement("div",{style:F},e.category),s.a.createElement("input",{style:M,type:"text","data-id":a,name:i,id:i,value:r[a].name,placeholder:"Conta filha",className:"nomeContaDebito"}))),s.a.createElement(E.a,{style:O,className:"px-0",align:"left",colSpan:2},s.a.createElement("input",{style:M,type:"text","data-id":a,name:t,id:t,value:r[a].name,placeholder:"Digite valor",className:"valorDebito"})),"quantitativo"==e.attribute?s.a.createElement(E.a,{style:O,className:"px-0",align:"left",colSpan:2},s.a.createElement("input",{style:M,"data-id":a,name:l,id:l,value:r[a].name,placeholder:"Digite quantidade",className:"quantidadeDebito"})):s.a.createElement(E.a,{style:O,className:"px-0",align:"left",colSpan:2},s.a.createElement("input",{disabled:!0,style:M,"data-id":a,name:l,id:l,value:r[a].name,placeholder:"N\xe3o quantitativo",className:"quantidadeDebito"})),null==e.is_father?s.a.createElement(E.a,{className:"px-0 capitalize",colSpan:4,align:"left",colSpan:1},"-"):s.a.createElement(o.Fragment,null,s.a.createElement(E.a,{style:O,className:"px-0",align:"left",colSpan:1},s.a.createElement("input",{"data-id":a,style:M,name:n,id:n,value:r[a].name,placeholder:"0",className:"valorInicialDebito"}))))})))):s.a.createElement("div",null)),s.a.createElement(p.a,{item:!0,item:!0,lg:6,md:6,sm:12,xs:12},s.a.createElement(p.a,{container:!0,style:{flexDirection:"row",justifyContent:"space-between"},spacing:1,item:!0},s.a.createElement(p.a,{item:!0,lg:8,md:8,sm:8,xs:8},s.a.createElement(_.a,{className:"mb-6 w-full",options:i,onChange:this.onCreditoChange,name:"tipo",getOptionLabel:e=>e.category,renderInput:e=>s.a.createElement(g.a,Object.assign({},e,{label:"Conta(s) Cr\xe9dito",variant:"outlined",placeholder:"Adicione uma conta cr\xe9dito.",fullWidth:!0}))})),s.a.createElement(p.a,{item:!0,lg:4,md:4,sm:4,xs:4},s.a.createElement(g.a,{value:m,label:"Total Cr\xe9dito",variant:"outlined",fullWidth:!0}))),n.length>0?s.a.createElement("div",{style:{border:"1px solid #cecece",marginBottom:20,borderRadius:3},className:"overflow-auto"},s.a.createElement(h.a,{className:"product-table"},s.a.createElement(b.a,null,s.a.createElement(v.a,null,s.a.createElement(E.a,{className:"px-6",colSpan:4},"Conta"),s.a.createElement(E.a,{className:"px-0",colSpan:2},"Valor Unit\xe1rio"),s.a.createElement(E.a,{className:"px-0",colSpan:2},"Quantidade"),s.a.createElement(E.a,{className:"px-0",colSpan:1},"Valor Inicial"))),s.a.createElement(C.a,null,n.map((e,a)=>{let t="valorCredito-".concat(a),l="quantidadeCredito-".concat(a),i="nomeContaCredito-".concat(a),r="valorInicial-".concat(a);return s.a.createElement(v.a,{key:a},null==e.is_father?s.a.createElement(E.a,{className:"px-0 capitalize",colSpan:4,align:"left"},e.category):s.a.createElement(E.a,{style:O,className:"px-0 capitalize",colSpan:4,align:"left"},s.a.createElement("div",{style:k},s.a.createElement("div",{style:F},e.category),s.a.createElement("input",{style:M,type:"text","data-id":a,name:i,id:i,value:n[a].name,placeholder:"Conta filha",className:"nomeContaCredito"}))),s.a.createElement(E.a,{style:O,className:"px-0",align:"left",colSpan:2},s.a.createElement("input",{style:M,type:"text","data-id":a,name:t,id:t,value:n[a].name,className:"valorCredito"})),"quantitativo"==e.attribute?s.a.createElement(E.a,{style:O,className:"px-0",align:"left",colSpan:2},s.a.createElement("input",{style:M,"data-id":a,name:l,id:l,value:n[a].name,className:"quantidadeCredito",placeholder:"Digite a quantidade"})):s.a.createElement(E.a,{style:O,className:"px-0",align:"left",colSpan:2},s.a.createElement("input",{disabled:!0,style:M,"data-id":a,name:l,id:l,value:n[a].name,className:"quantidadeCredito",placeholder:"N\xe3o quantitativo"})),null==e.is_father?s.a.createElement(E.a,{className:"px-0 capitalize",colSpan:4,align:"left",colSpan:1},"-"):s.a.createElement(o.Fragment,null,s.a.createElement(E.a,{style:O,className:"px-0",align:"left",colSpan:1},s.a.createElement("input",{"data-id":a,style:M,name:r,id:r,value:n[a].name,placeholder:"0",className:"valorInicialCredito"}))))})))):s.a.createElement("div",null))),s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},s.a.createElement(f.a,{color:"primary",variant:"contained",type:"submit"},s.a.createElement(D.a,null,"send"),s.a.createElement("span",{className:"pl-2 capitalize"},"Criar")),s.a.createElement(x.a,{control:s.a.createElement(y.a,{onClick:()=>{this.handleShowCategories()}}),label:"Desejo acrescentar valores iniciais para essa aula."}))))))}})))}}]);
//# sourceMappingURL=20.8f8ef6ba.chunk.js.map